{"ast":null,"code":"import { setToken } from '../../utils';\nimport feedTypes from './feedTypes';\nimport axios from 'axios';\nimport cogoToast from 'cogo-toast';\nimport * as Routes from '../../component/routes';\nexport const retrieveFeedPostsStart = history => async dispatch => {\n  const token = localStorage.getItem('authToken');\n  const config = {\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n\n  if (token) {\n    await setToken(token);\n  }\n\n  ;\n\n  try {\n    const response = await axios.get(`api/route/post/retrieveFeedPosts`, config);\n\n    if (response) {\n      console.log(response.data);\n      dispatch({\n        type: feedTypes.FETCH_FEED_SUCCESS,\n        payload: response.data.posts\n      });\n    }\n  } catch (error) {\n    if (error.response) {\n      console.log(error.response.data);\n      await dispatch({\n        type: feedTypes.FETCH_POSTS_FAILURE,\n        payload: error.response.data.msg\n      });\n      cogoToast.info(`${error.response.data.msg}`, {\n        position: 'top-center'\n      });\n\n      if (error.response.data.msg === \"jwt expired\" || error.response.data.msg === `you're not authorised`) {\n        history.push('/');\n        localStorage.removeItem('authToken');\n      }\n    }\n  }\n};","map":{"version":3,"sources":["/Users/mac/Documents/mern stack/photoShare/client/src/redux/feed/feedAction.js"],"names":["setToken","feedTypes","axios","cogoToast","Routes","retrieveFeedPostsStart","history","dispatch","token","localStorage","getItem","config","headers","response","get","console","log","data","type","FETCH_FEED_SUCCESS","payload","posts","error","FETCH_POSTS_FAILURE","msg","info","position","push","removeItem"],"mappings":"AAAA,SAASA,QAAT,QAAyB,aAAzB;AAEA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAO,KAAKC,MAAZ,MAAwB,wBAAxB;AAIA,OAAO,MAAMC,sBAAsB,GAAIC,OAAD,IAAa,MAAMC,QAAN,IAAkB;AAEjE,QAAMC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd;AAEA,QAAMC,MAAM,GAAG;AACXC,IAAAA,OAAO,EAAE;AACL,sBAAgB;AADX;AADE,GAAf;;AAKA,MAAIJ,KAAJ,EAAW;AACP,UAAMR,QAAQ,CAACQ,KAAD,CAAd;AACH;;AAAA;;AACD,MAAI;AACA,UAAMK,QAAQ,GAAG,MAAMX,KAAK,CAACY,GAAN,CAAW,kCAAX,EAA8CH,MAA9C,CAAvB;;AACA,QAAIE,QAAJ,EAAc;AACVE,MAAAA,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACI,IAArB;AACAV,MAAAA,QAAQ,CAAC;AAAEW,QAAAA,IAAI,EAAEjB,SAAS,CAACkB,kBAAlB;AAAsCC,QAAAA,OAAO,EAAEP,QAAQ,CAACI,IAAT,CAAcI;AAA7D,OAAD,CAAR;AACH;AACJ,GAND,CAME,OAAOC,KAAP,EAAc;AACZ,QAAIA,KAAK,CAACT,QAAV,EAAoB;AAChBE,MAAAA,OAAO,CAACC,GAAR,CAAYM,KAAK,CAACT,QAAN,CAAeI,IAA3B;AACA,YAAMV,QAAQ,CAAC;AAAEW,QAAAA,IAAI,EAAEjB,SAAS,CAACsB,mBAAlB;AAAuCH,QAAAA,OAAO,EAAEE,KAAK,CAACT,QAAN,CAAeI,IAAf,CAAoBO;AAApE,OAAD,CAAd;AACArB,MAAAA,SAAS,CAACsB,IAAV,CAAgB,GAAEH,KAAK,CAACT,QAAN,CAAeI,IAAf,CAAoBO,GAAI,EAA1C,EAA6C;AAAEE,QAAAA,QAAQ,EAAE;AAAZ,OAA7C;;AACA,UAAIJ,KAAK,CAACT,QAAN,CAAeI,IAAf,CAAoBO,GAApB,KAA4B,aAA5B,IAA6CF,KAAK,CAACT,QAAN,CAAeI,IAAf,CAAoBO,GAApB,KAA6B,uBAA9E,EAAsG;AAClGlB,QAAAA,OAAO,CAACqB,IAAR,CAAa,GAAb;AACAlB,QAAAA,YAAY,CAACmB,UAAb,CAAwB,WAAxB;AACH;AAEJ;AACJ;AACJ,CA9BM","sourcesContent":["import { setToken } from '../../utils'\n\nimport feedTypes from './feedTypes';\n\nimport axios from 'axios';\nimport cogoToast from 'cogo-toast';\nimport * as Routes from '../../component/routes';\n\n\n\nexport const retrieveFeedPostsStart = (history) => async dispatch => {\n\n    const token = localStorage.getItem('authToken');\n\n    const config = {\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    }\n    if (token) {\n        await setToken(token)\n    };\n    try {\n        const response = await axios.get(`api/route/post/retrieveFeedPosts`, config)\n        if (response) {\n            console.log(response.data)\n            dispatch({ type: feedTypes.FETCH_FEED_SUCCESS, payload: response.data.posts })\n        }\n    } catch (error) {\n        if (error.response) {\n            console.log(error.response.data)\n            await dispatch({ type: feedTypes.FETCH_POSTS_FAILURE, payload: error.response.data.msg })\n            cogoToast.info(`${error.response.data.msg}`, { position: 'top-center' })\n            if (error.response.data.msg === \"jwt expired\" || error.response.data.msg === `you're not authorised`) {\n                history.push('/');\n                localStorage.removeItem('authToken');\n            }\n\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}