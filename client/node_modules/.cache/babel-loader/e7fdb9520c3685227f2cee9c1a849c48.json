{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,Fragment}from'react';import'./style.scss';import*as Routes from'../../component/routes';import axios from'axios';import{setToken}from'../../utils';import Loader from'../../component/Loader';import cogoToast from'cogo-toast';import{useParams,useHistory}from'react-router-dom';import{useSelector}from'react-redux';import Avatar from'../../assets/default-avatar.png';import*as Icon from'react-feather';import Footer from'../../component/Footer';import PostCard from'../../component/Explorepostcard/PostCard';import{v4 as uuidv4}from'uuid';import FollowButton from'../../component/FollowButton';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var token=localStorage.getItem('authToken');var ProfilePage=function ProfilePage(){var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),profile=_useState2[0],setProfile=_useState2[1];var _useParams=useParams(),username=_useParams.username;var currentUser=useSelector(function(_ref){var user=_ref.user;return user.currentUser;});var history=useHistory();useEffect(function(){var sub=true;if(sub){getProfile();}return function(){return sub=null;};},[]);var getProfile=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var config,response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(token){setToken(token);}config={headers:{'Content-Type':'applocation/json'}};_context.prev=2;_context.next=5;return axios.get(\"/api/route/user/userprofile/\".concat(username),config);case 5:response=_context.sent;if(!response){_context.next=10;break;}data=response.data.userProfile[0];_context.next=10;return setProfile(data);case 10:_context.next=16;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](2);if(_context.t0){cogoToast.error(\"\".concat(_context.t0.message));}console.log(_context.t0);case 16:case\"end\":return _context.stop();}}},_callee,null,[[2,12]]);}));return function getProfile(){return _ref2.apply(this,arguments);};}();if(!profile){return/*#__PURE__*/_jsx(Loader,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"profilepage__wrapper\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"header__content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile__image\",children:/*#__PURE__*/_jsx(\"img\",{src:profile.avatar?profile.avatar:Avatar,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile__details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"username\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",profile.username]}),currentUser&&profile&&profile._id!==currentUser._id?/*#__PURE__*/_jsx(FollowButton,{userId:profile&&profile._id}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"settings__btn\",onClick:function onClick(){return history.push(Routes.SettingsPage);},children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{className:\"icon_btn\",children:/*#__PURE__*/_jsx(Icon.Settings,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"follow__details\",children:[/*#__PURE__*/_jsxs(\"small\",{children:[profile.posts&&profile.posts.length?profile.posts.length:0,\" posts\"]}),/*#__PURE__*/_jsxs(\"small\",{children:[profile.followers&&profile.followers.length?profile.followers.length:0,' ',\"followers\"]}),/*#__PURE__*/_jsxs(\"small\",{children:[' ',profile.following&&profile.following.length?profile.following.length:0,' ',\"following\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\" \",profile.name]})})]})]})}),/*#__PURE__*/_jsx(\"section\",{style:{width:'100%'},children:/*#__PURE__*/_jsx(\"div\",{className:\"post__title\",children:/*#__PURE__*/_jsx(Icon.Grid,{className:\"grid__icon\"})})}),profile.posts?/*#__PURE__*/_jsx(\"div\",{className:\"posts__gallery\",children:profile.posts.map(function(post){return/*#__PURE__*/_jsx(PostCard// src={post.postMedia}\n,{alt:\"post image\",post:post},uuidv4());})}):/*#__PURE__*/_jsx(\"h4\",{children:\" no posts to show \"})]});};export default ProfilePage;","map":{"version":3,"sources":["/Users/mac/Documents/mern stack/photoShare/client/src/screens/ProfilePage/index.js"],"names":["React","useState","useEffect","Fragment","Routes","axios","setToken","Loader","cogoToast","useParams","useHistory","useSelector","Avatar","Icon","Footer","PostCard","v4","uuidv4","FollowButton","token","localStorage","getItem","ProfilePage","undefined","profile","setProfile","username","currentUser","user","history","sub","getProfile","config","headers","get","response","data","userProfile","error","message","console","log","avatar","_id","push","SettingsPage","posts","length","followers","following","name","width","map","post"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Fragment } from 'react';\nimport './style.scss';\nimport * as Routes from '../../component/routes';\nimport axios from 'axios';\nimport { setToken } from '../../utils';\nimport Loader from '../../component/Loader';\nimport cogoToast from 'cogo-toast';\nimport { useParams, useHistory } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport Avatar from '../../assets/default-avatar.png';\nimport * as Icon from 'react-feather';\nimport Footer from '../../component/Footer';\nimport PostCard from '../../component/Explorepostcard/PostCard';\nimport { v4 as uuidv4 } from 'uuid';\nimport FollowButton from '../../component/FollowButton';\n\nconst token = localStorage.getItem('authToken');\n\nconst ProfilePage = () => {\n  const [profile, setProfile] = useState(undefined);\n  const { username } = useParams();\n  const currentUser = useSelector(({ user }) => user.currentUser);\n  const history = useHistory();\n\n  useEffect(() => {\n    let sub = true;\n    if (sub) {\n      getProfile();\n    }\n\n    return () => (sub = null);\n  }, []);\n  const getProfile = async () => {\n    if (token) {\n      setToken(token);\n    }\n    const config = {\n      headers: {\n        'Content-Type': 'applocation/json',\n      },\n    };\n    try {\n      const response = await axios.get(`/api/route/user/userprofile/${username}`, config);\n      if (response) {\n        const data = response.data.userProfile[0];\n        await setProfile(data);\n      }\n    } catch (error) {\n      if (error) {\n        cogoToast.error(`${error.message}`);\n      }\n      console.log(error);\n    }\n  };\n\n  if (!profile) {\n    return <Loader />;\n  }\n\n  return (\n    <div className=\"profilepage__wrapper\">\n      <header className=\"header\">\n        <div className=\"header__content\">\n          <div className=\"profile__image\">\n            <img src={profile.avatar ? profile.avatar : Avatar} alt=\"\" />\n          </div>\n          <div className=\"profile__details\">\n            <div className=\"username\">\n              <h2> {profile.username}</h2>\n              {currentUser && profile && profile._id !== currentUser._id ? (\n                <FollowButton userId={profile && profile._id} />\n              ) : (\n                <Fragment>\n                  <button\n                    className=\"settings__btn\"\n                    onClick={() => history.push(Routes.SettingsPage)}\n                  >\n                    Edit Profile\n                  </button>\n                  <button className=\"icon_btn\">\n                    <Icon.Settings />\n                  </button>\n                </Fragment>\n              )}\n            </div>\n\n            <div className=\"follow__details\">\n              <small>\n                {profile.posts && profile.posts.length ? profile.posts.length : 0} posts\n              </small>\n              <small>\n                {profile.followers && profile.followers.length ? profile.followers.length : 0}{' '}\n                followers\n              </small>\n              <small>\n                {' '}\n                {profile.following && profile.following.length ? profile.following.length : 0}{' '}\n                following\n              </small>\n            </div>\n\n            <div className=\"name\">\n              <p> {profile.name}</p>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <section style={{ width: '100%' }}>\n        <div className=\"post__title\">\n          <Icon.Grid className=\"grid__icon\" />\n        </div>\n      </section>\n\n      {profile.posts ? (\n        <div className=\"posts__gallery\">\n          {profile.posts.map((post) => {\n            return (\n              <PostCard\n                // src={post.postMedia}\n                key={uuidv4()}\n                alt=\"post image\"\n                post={post}\n              />\n            );\n          })}\n        </div>\n      ) : (\n        <h4> no posts to show </h4>\n      )}\n\n    </div>\n  );\n};\n\nexport default ProfilePage;\n"]},"metadata":{},"sourceType":"module"}