{"ast":null,"code":"import _defineProperty from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/mac/Documents/mern stack/photoShare/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import'./style.scss';import{ReactComponent as CardButton}from\"@svgr/webpack?-svgo,+titleProp,+ref!../../../assets/cardButton.svg\";import CardMenu from'../CardMenu';import CommentList from'../../CommentList';import Profile from'../../Profile';import moment from'moment';import dayjs from'dayjs';import ExploreCardMenu from'../../ExplorePostCardMenu';import{commentPost}from'../../../redux/Actions/postActions';import{useDispatch}from'react-redux';import{useHistory}from'react-router-dom';import{likePost}from'../../../redux/Actions/postActions';import Loader from'../../Loader';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Card(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),commentText=_useState2[0],setCommentText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isSubmitting=_useState4[0],setIsSubmitting=_useState4[1];var history=useHistory();var dispatch=useDispatch();var inputRef=useRef();var storyBorder=props.storyBorder,feed=props.feed,image=props.image,comments=props.comments,likedByText=props.likedByText,likedByNumber=props.likedByNumber,accountName=props.accountName,avatar=props.avatar,hours=props.hours;React.useEffect(function(){return function(){return null;};});var handlePost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;setIsSubmitting(true);_context.next=5;return dispatch(commentPost(feed._id,commentText,history));case 5:setCommentText('');setIsSubmitting(false);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(_context.t0.message);case 12:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function handlePost(_x){return _ref.apply(this,arguments);};}();var likeFunc=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return dispatch(likePost(feed._id,history));case 3:_context2.next=8;break;case 5:_context2.prev=5;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,5]]);}));return function likeFunc(){return _ref2.apply(this,arguments);};}();var focus=function focus(){inputRef.current.focus();};return/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsxs(\"header\",{children:[/*#__PURE__*/_jsx(Profile,{iconSize:\"medium\",image:avatar,authorUsername:feed.author.username,username:accountName,storyBorder:storyBorder}),/*#__PURE__*/_jsx(CardButton,{className:\"cardButton\"})]}),/*#__PURE__*/_jsx(\"img\",{className:\"cardImage\",src:image,alt:\"card content\"}),\" \",/*#__PURE__*/_jsx(ExploreCardMenu,{focus:focus,likeFunc:likeFunc,userpost:feed}),/*#__PURE__*/_jsx(\"div\",{className:\"likedBy\",children:!feed.likes?/*#__PURE__*/_jsxs(\"span\",{className:\"like-title\",children:[' ',\"Be the first to \",/*#__PURE__*/_jsx(\"b\",{children:\"like this\"})]}):/*#__PURE__*/_jsxs(\"span\",{children:[feed.likes.length,\" Likes\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"comments\",children:comments&&comments.map(function(comment){var _jsx2;return/*#__PURE__*/_jsx(CommentList,(_jsx2={accountName:comment.user,comment:comment,commentId:comment._id,commentuser:comment._user,commentText:comment.commentText,userpost:feed},_defineProperty(_jsx2,\"accountName\",comment.username),_defineProperty(_jsx2,\"comment\",comment.commentText),_defineProperty(_jsx2,\"commentImage\",comment.avatar),_defineProperty(_jsx2,\"commentTime\",comment.commentDate),_jsx2),comment._id);})}),/*#__PURE__*/_jsxs(\"div\",{className:\"timePosted\",children:[moment(feed.date).fromNow(),\" \"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePost,className:\"addComment\",children:[/*#__PURE__*/_jsx(\"input\",{ref:inputRef,value:commentText,onChange:function onChange(e){return setCommentText(e.target.value);},type:\"text\",placeholder:\"Add a comment...\",className:\"commentText\"}),isSubmitting&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:commentText?false:true,className:\"postText-btn\",onSubmit:handlePost,children:\"Post\"})]})]});}export default Card;","map":{"version":3,"sources":["/Users/mac/Documents/mern stack/photoShare/client/src/component/Cards/Card/index.js"],"names":["React","useState","useRef","CardMenu","CommentList","Profile","moment","dayjs","ExploreCardMenu","commentPost","useDispatch","useHistory","likePost","Loader","Card","props","commentText","setCommentText","isSubmitting","setIsSubmitting","history","dispatch","inputRef","storyBorder","feed","image","comments","likedByText","likedByNumber","accountName","avatar","hours","useEffect","handlePost","e","preventDefault","_id","console","log","message","likeFunc","focus","current","author","username","likes","length","map","comment","user","_user","commentDate","date","fromNow","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\nimport './style.scss';\nimport { ReactComponent as CardButton } from '../../../assets/cardButton.svg';\nimport CardMenu from '../CardMenu';\nimport CommentList from '../../CommentList';\nimport Profile from '../../Profile';\nimport moment from 'moment';\nimport dayjs from 'dayjs';\nimport ExploreCardMenu from '../../ExplorePostCardMenu';\nimport { commentPost } from '../../../redux/Actions/postActions';\nimport { useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { likePost } from '../../../redux/Actions/postActions';\nimport Loader from '../../Loader'\nfunction Card(props) {\n  const [commentText, setCommentText] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const inputRef = useRef();\n\n  const {\n    storyBorder,\n    feed,\n    image,\n    comments,\n    likedByText,\n    likedByNumber,\n    accountName,\n    avatar,\n    hours,\n  } = props;\n\n  React.useEffect(() => {\n    return () => null;\n  });\n  const handlePost = async (e) => {\n    e.preventDefault();\n    try {\n      setIsSubmitting(true)\n      await dispatch(commentPost(feed._id, commentText, history));\n      setCommentText('');\n      setIsSubmitting(false)\n    } catch (error) {\n      console.log(error.message);\n    }\n  };\n  const likeFunc = async () => {\n    try {\n      await dispatch(likePost(feed._id, history));\n      // setIsLikedButtonClicked(true)\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const focus = () => {\n    inputRef.current.focus();\n  };\n  return (\n    <div className=\"card\">\n      <header>\n        <Profile\n          iconSize=\"medium\"\n          image={avatar}\n          authorUsername={feed.author.username}\n          username={accountName}\n          storyBorder={storyBorder}\n        />\n        <CardButton className=\"cardButton\" />\n      </header>\n      <img className=\"cardImage\" src={image} alt=\"card content\" />\n      {/*  <CardMenu /> */} <ExploreCardMenu focus={focus} likeFunc={likeFunc} userpost={feed} />\n      <div className=\"likedBy\">\n        {/*  <Profile iconSize=\"small\" hideAccountName={true} /> */}\n        {/*  <span>\n                    Liked by <strong>{likedByText}</strong> and{\" \"}\n                    <strong>{likedByNumber} others</strong>\n                </span> */}\n        {!feed.likes ? (\n          <span className=\"like-title\">\n            {' '}\n            Be the first to <b>like this</b>\n          </span>\n        ) : (\n          <span>{feed.likes.length} Likes</span>\n        )}\n      </div>\n      <div className=\"comments\">\n        {comments &&\n          comments.map((comment) => {\n            return (\n              <CommentList\n                key={comment._id}\n                accountName={comment.user}\n                comment={comment}\n                commentId={comment._id}\n                commentuser={comment._user}\n                commentText={comment.commentText}\n                userpost={feed}\n                accountName={comment.username}\n                comment={comment.commentText}\n                commentImage={comment.avatar}\n                commentTime={comment.commentDate}\n              />\n            );\n          })}\n      </div>\n      <div className=\"timePosted\">{moment(feed.date).fromNow()} </div>\n      <form onSubmit={handlePost} className=\"addComment\">\n        <input\n          ref={inputRef}\n          value={commentText}\n          onChange={(e) => setCommentText(e.target.value)}\n          type=\"text\"\n          placeholder=\"Add a comment...\"\n          className=\"commentText\"\n        />\n        {isSubmitting && <Loader />}\n        <button\n          type=\"submit\"\n          disabled={commentText ? false : true}\n          className=\"postText-btn\"\n          onSubmit={handlePost}\n        >\n          Post\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Card;\n"]},"metadata":{},"sourceType":"module"}