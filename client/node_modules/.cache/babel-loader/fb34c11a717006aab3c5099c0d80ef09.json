{"ast":null,"code":"import { userActionTypes } from '../Constants/userConstants';\nimport { setToken } from '../../utils';\nimport { Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport cogoToast from 'cogo-toast';\nimport * as Routes from '../../component/routes';\nconst baseUrl = process.env.REACT_APP_BASE_URL || \"http://localhost:9000\";\nexport const signup = (data, history) => {\n  return async dispatch => {\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      cogoToast.loading('Registering....');\n      const response = await axios.post(`/api/route/user/register`, config, data);\n\n      if (response) {\n        await dispatch({\n          type: userActionTypes.SIGN_UP_SUCESS,\n          payload: response.data\n        });\n        cogoToast.success('Register successfully');\n        history.push('/');\n      }\n    } catch (error) {\n      console.log(error.message);\n\n      if (error.response) {\n        await dispatch({\n          type: userActionTypes.SIGN_UP_FAIL,\n          payload: error.response.data\n        });\n        cogoToast.error(`${error.response.data.msg}`);\n      }\n    }\n  };\n};\nexport const signin = (data, history) => {\n  return async dispatch => {\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        }\n      };\n      const response = await axios.post(`/api/route/user/login`, data, config);\n\n      if (response) {\n        await dispatch({\n          type: userActionTypes.LOG_IN_SUCCESS,\n          payload: response.data\n        });\n        await localStorage.setItem('authToken', response.data.jwtToken);\n        await cogoToast.success('sign in success', {\n          position: 'bottom-right'\n        });\n        history.push(Routes.Dashboard);\n      }\n    } catch (error) {\n      if (error.response) {\n        await dispatch({\n          type: userActionTypes.LOG_IN_FAIL,\n          payload: error.response.data\n        });\n        cogoToast.error(`${error.response.data.msg}`);\n      }\n    }\n  };\n};\nexport const loaduser = history => {\n  return async dispatch => {\n    const token = localStorage.getItem('authToken');\n\n    try {\n      if (token) {\n        setToken(token);\n      }\n\n      const response = await axios.get(\"/api/route/user/getUser\");\n\n      if (response) {\n        await dispatch({\n          type: userActionTypes.LOAD_USER_SUCCESS,\n          payload: response.data.user[0]\n        });\n      }\n    } catch (error) {\n      if (error.response) {\n        await dispatch({\n          type: userActionTypes.LOAD_USER_FAIL,\n          payload: error.response.data\n        });\n        cogoToast.warn(`${error.response.data.msg}`, {\n          position: \"top-right\"\n        });\n\n        if (error.response.data.msg === \"jwt expired\" || error.response.data.msg === `you're not authorised`) {\n          localStorage.removeItem('authToken');\n          history.push('/');\n          cogoToast.info('session expired');\n        }\n      }\n    }\n  };\n};\nexport const LogOut = history => {\n  return async dispatch => {\n    try {\n      await localStorage.removeItem('authToken');\n      dispatch({\n        type: userActionTypes.LOG_OUT_SUCCESS,\n        payload: \"sign out sucessful\"\n      });\n      history.push(Routes.Login);\n      cogoToast.success('Sign out success');\n    } catch (error) {\n      console.log(error.message);\n      dispatch({\n        type: userActionTypes.LOG_OUT_FAIL,\n        payload: error.message\n      });\n    }\n  };\n};\n_c = LogOut;\n\nvar _c;\n\n$RefreshReg$(_c, \"LogOut\");","map":{"version":3,"sources":["/Users/mac/Documents/mern stack/photoShare/client/src/redux/Actions/userActions.js"],"names":["userActionTypes","setToken","Redirect","axios","cogoToast","Routes","baseUrl","process","env","REACT_APP_BASE_URL","signup","data","history","dispatch","config","headers","loading","response","post","type","SIGN_UP_SUCESS","payload","success","push","error","console","log","message","SIGN_UP_FAIL","msg","signin","LOG_IN_SUCCESS","localStorage","setItem","jwtToken","position","Dashboard","LOG_IN_FAIL","loaduser","token","getItem","get","LOAD_USER_SUCCESS","user","LOAD_USER_FAIL","warn","removeItem","info","LogOut","LOG_OUT_SUCCESS","Login","LOG_OUT_FAIL"],"mappings":"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","sourcesContent":["import { userActionTypes } from '../Constants/userConstants';\nimport { setToken } from '../../utils'\nimport { Redirect } from 'react-router-dom';\n\nimport axios from 'axios';\nimport cogoToast from 'cogo-toast';\nimport * as Routes from '../../component/routes';\n\nconst baseUrl = process.env.REACT_APP_BASE_URL || \"http://localhost:9000\"\n\n\nexport const signup = (data, history) => {\n    return async (dispatch) => {\n        try {\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            }\n            cogoToast.loading('Registering....')\n            const response = await axios.post(`/api/route/user/register`, config, data);\n            if (response) {\n                await dispatch({ type: userActionTypes.SIGN_UP_SUCESS, payload: response.data });\n                cogoToast.success('Register successfully');\n                history.push('/')\n            }\n        } catch (error) {\n            console.log(error.message)\n            if (error.response) {\n                await dispatch({ type: userActionTypes.SIGN_UP_FAIL, payload: error.response.data })\n                cogoToast.error(`${error.response.data.msg}`)\n            }\n        }\n    }\n};\n\nexport const signin = (data, history) => {\n    return async (dispatch) => {\n\n        try {\n            const config = {\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                }\n            };\n            const response = await axios.post(`/api/route/user/login`, data, config);\n            if (response) {\n                await dispatch({ type: userActionTypes.LOG_IN_SUCCESS, payload: response.data });\n                await localStorage.setItem('authToken', response.data.jwtToken);\n                await cogoToast.success('sign in success', { position: 'bottom-right' });\n                history.push(Routes.Dashboard);\n\n            }\n        } catch (error) {\n            if (error.response) {\n                await dispatch({ type: userActionTypes.LOG_IN_FAIL, payload: error.response.data });\n                cogoToast.error(`${error.response.data.msg}`)\n            }\n        }\n    }\n};\n\nexport const loaduser = (history) => {\n\n    return async (dispatch) => {\n        const token = localStorage.getItem('authToken');\n\n        try {\n            if (token) { setToken(token) }\n            const response = await axios.get(\"/api/route/user/getUser\");\n            if (response) {\n                await dispatch({ type: userActionTypes.LOAD_USER_SUCCESS, payload: response.data.user[0] })\n\n            }\n        } catch (error) {\n            if (error.response) {\n                await dispatch({ type: userActionTypes.LOAD_USER_FAIL, payload: error.response.data })\n                cogoToast.warn(`${error.response.data.msg}`, { position: \"top-right\" });\n                if (error.response.data.msg === \"jwt expired\" || error.response.data.msg === `you're not authorised`) {\n                    localStorage.removeItem('authToken');\n                    history.push('/')\n                    cogoToast.info('session expired');\n                }\n            }\n\n        }\n    }\n};\n\nexport const LogOut = (history) => {\n    return async (dispatch) => {\n        try {\n            await localStorage.removeItem('authToken');\n            dispatch({ type: userActionTypes.LOG_OUT_SUCCESS, payload: \"sign out sucessful\" })\n            history.push(Routes.Login);\n            cogoToast.success('Sign out success');\n        } catch (error) {\n            console.log(error.message)\n            dispatch({ type: userActionTypes.LOG_OUT_FAIL, payload: error.message })\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}